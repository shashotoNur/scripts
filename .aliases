# ===============================================
# 1. CORE SHELL COMMANDS & NAVIGATION
# ===============================================

# Navigation
alias cl='clear'
alias rs='reset'
alias cale='cal -3'
alias grep='rg'                # Use ripgrep (rg) as default grep
alias rm=rmtrash               # Safer remove (moves to trash)
alias rmdir=rmdirtrash         # Safer remove directory (moves to trash)
alias ping='ping -c 5'
alias pingg='ping archlinux.org'
alias :q='exit'                                 # Quicker exit
alias reload="source $HOME/.zshrc"              # Source RC file
alias pathlist='echo "$PATH" | tr ":" "\n"'     # View PATH line-by-line

# Directory Aliases and Functions
cdls() { builtin cd "$1" && ls }
zls() { command z "$1" && ls }
alias cd='cdls'                # cd and then ls
alias z='zls'                  # zsh-z and then ls
alias ls='eza --header --git --group-directories-first --icons=always -s extension' # Modern ls
alias ll='ls -lh'              # Long listing, human readable
alias md='mkdir -p'            # Make directory and parents
mkcd() { md $1 && cd $1 }      # Make directory and change into it

# Parent Directory Jumps
alias ...=../..
alias ....=../../..
alias .....=../../../..
alias ......=../../../../..

# File Operations
alias mv='command mv -nv'      # Move: no-clobber, verbose
alias cp='command cp -rnv'     # Copy: recursive, no-clobber, verbose


# ===============================================
# 2. GIT ALIASES
# ===============================================

alias g=git
alias ga='git add'
alias gc='git commit --verbose'
alias gcb='git checkout -b'
alias gcmsg='git commit --message'
alias gco='git checkout'
alias gignore='git update-index --assume-unchanged'
alias glgga='git log --graph --decorate --all'
alias glo='git log --oneline --decorate'
alias gloga='git log --oneline --decorate --graph --all'
alias gp='git push'
alias gra='git remote add'
alias gst='git status --short'


# ===============================================
# 3. NETWORKING & SYSTEM INFO
# ===============================================

alias ipv4="ip addr show | grep 'inet ' | grep -v '127.0.0.1' | cut -d' ' -f6 | cut -d/ -f1"    # Primary IPv4
alias ipv6="ip addr show | grep 'inet6 ' | cut -d ' ' -f6 | sed -n '2p'"                        # Primary IPv6
alias pubip='curl ifconfig.me; echo'    # External IP
alias whoisit='echo "$USER@$HOST"'      # Simple user/host display
alias showmac='echo "Wired (eno1) MAC: $(ip a show eno1 | grep -oP "link/ether \K[^ ]+")" && echo "Wireless (wlo1) MAC: $(ip a show wlo1 | grep -oP "link/ether \K[^ ]+")"'
alias lsblkk='lsblk -o NAME,FSTYPE,PARTLABEL,LABEL,MOUNTPOINT,TYPE,TRAN,SIZE,MODEL,VENDOR'  # Detailed lsblk
alias diskspace='df -hT --exclude-type=tmpfs --exclude-type=devtmpfs'                       # Human-readable disk usage

# VPN
alias vpnup="sudo wg-quick up nexus-JP-FREE33"
alias vpndown="sudo wg-quick down nexus-JP-FREE33"

# ===============================================
# 4. TIME & UTILITY
# ===============================================

alias daty='date +%Y-%m-%d'    # Simple YYYY-MM-DD format
alias clock='watch -n 1 date +"%T"' # Live digital clock (HH:MM:SS)
weather() { curl "wttr.in/$1" | head -n -1; } # Weather for location
alias top-commands="history | awk '{if (\$2 != \"\") CMD[\$2]++; count++;} END { for (a in CMD) print CMD[a], CMD[a]/count*100 \"%\", a;}' | grep -v \"./\" | column -c3 -s \" \" -t | sort -nr | nl | head -n10" # Top 10 commands
alias cpb=wl-copy              # Copy to clipboard (requires wl-clipboard)
alias 0x0="curl -F 'file=@-' 0x0.st" # Upload pipe data to 0x0.st
alias fastfetch='fastfetch --logo-type kitty'

# ===============================================
# 5. PACMAN/AUR & ARCHLINUX
# ===============================================

alias localpkg="pacman -Qq | fzf --preview 'pacman -Qil {}' --layout=reverse --bind 'enter:execute(pacman -Qil {} | less)'" # Search installed packages
alias remotepkg="pacman -Slq | fzf --preview 'pacman -Si {}' --layout=reverse" # Search remote packages
alias mirrorupdate="sudo reflector --country US --age 12 --protocol https --sort rate --threads 10 --save /etc/pacman.d/mirrorlist" # Update mirrors
alias error='journalctl -b -p err' # View errors from current boot
alias drop_caches="echo 3 | sudo tee /proc/sys/vm/drop_caches" # Free up system memory caches

# Get AUR packages from Github if AUR is down
gcaur () {
    if [ -z "$1" ]; then
        echo "Error: Please provide a package name."
        echo "Usage: gcaur <package_name>"
        return 1
    fi

    git clone --branch "$1" --single-branch https://github.com/archlinux/aur.git "$1"

    if [ $? -eq 0 ]; then
        echo -e "\nSuccessfully cloned '$1'"
        echo "Next steps: cd $1 && yay -Bi ."
    fi
}

# ===============================================
# 6. EDITOR & WORKFLOW
# ===============================================

alias scratch='$EDITOR $(mktemp)'   # Open a temporary text file
alias addquote="sed -i 's/^/> /'"   # Add quote padding
alias rmquote="sed -i 's/^> //'"    # Remove quote padding
alias reset-nvim="rm -rf ~/.config/nvim ~/.local/share/nvim ~/.local/state/nvim ~/.cache/nvim" # Wipe NVIM configuration

# Interactive File Open in Neovim (inv)
inv() {
  local files
  files=$(command find * -type f | fzf -m --preview="bat --color=always --style=numbers {}")

  if [[ -n "$files" ]]; then
    local -a file_array=()
    while IFS= read -r line; do
      file_array+=("$line")
    done <<< "$files"

    neovim "${file_array[@]}"
  fi
}

# C Compile and Run
crun='f(){ gcc -o "${1%.c}.bin" "$1" && kitty sh -c "./${1%.c}.bin; echo -e \"\n\nPress any key to close...\"; read" && rm "${1%.c}.bin"; }; f'


# ===============================================
# 7. KITTY & TERMINAL CUSTOMIZATION
# ===============================================

# Kitty Padding Control
alias remove_padding="kitty @ set-spacing padding-left=0 padding-top=0 padding-right=0 padding-bottom=0"
alias restore_padding="kitty @ set-spacing padding-left=default padding-top=default padding-right=default padding-bottom=default"

# Neovim Wrapper
neovim() {
     remove_padding
     nvim "$1"
     restore_padding
}

# Kitty Native Support
alias kittyplay="mpv --no-config --vo=kitty --really-quiet --loop-file=inf" # Play video/audio in terminal

# Screensavers
alias rain='terminal-rain --rain-color blue --lightning-color white' # Matrix rain effect
screensaver () {
        kitty @ set-spacing padding-left=5 padding-top=0 padding-right=5 padding-bottom=0
        cmatrix -C blue -s -M "$HOST is now on standby..."
        kitty @ set-spacing padding-left=default padding-top=default padding-right=default padding-bottom=default
}

# ===============================================
# 8. OTHER UTILITIES & I/O
# ===============================================

# Arduino IDE
alias arduino='arduino-ide --enable-features=UseOzonePlatform --ozone-platform=x11'

# Youtube Music playlist download
alias ytmusic="yt-dlp -x --audio-format mp3 --download-archive archive.txt --embed-thumbnail --embed-metadata" # ytmusic --cookies <cookies.txt> <url>

# Github clone all of user's repositories
alias ghclone="gh repo list \"$1\" --limit 9999 | while read -r repo_name _; do gh repo clone \"$repo_name\"; done"

# Input Method/Keyboard Layout Toggle
alias togglekey='[ "$(ibus engine)" = "ibus-avro" ] && ibus engine xkb:us::eng || ibus engine ibus-avro'

# Windows Application Runner (Bottles)
bottlesrun() {
    if [ -z "$1" ] || [ -z "$2" ]; then
        echo "Error: Two arguments are required."
        echo "Usage: bottlesrun <bottle name> <path to executable>"
        return 1
    fi
    prime-run flatpak run --command=bottles-cli com.usebottles.bottles run -b "$1" -e "$2"
}

# Bluetooth Control
bt() {
    if [[ "$1" == "connect" ]]; then
        bluetoothctl connect "$(bluetoothctl devices | awk -v device_name="$2" '$0 ~ device_name {print $2}')"
    elif [[ "$1" == "disconnect" ]]; then
        bluetoothctl disconnect "$(bluetoothctl devices | awk -v device_name="$2" '$0 ~ device_name {print $2}')"
    else
        echo "Usage: bt connect/disconnect *device name*"
    fi
}

# System Control
alias bootuefi="systemctl reboot --firmware-setup"                                          # Reboot into UEFI/BIOS setup
wakefor() {
    if [ -z "$1" ]; then
        echo "Usage: wakefor <PID>"
        return 1
    fi
    systemd-inhibit --why="Awaiting PID $1" tail --pid="$1" -f /dev/null
}   # Wait for PID termination without sleeping
